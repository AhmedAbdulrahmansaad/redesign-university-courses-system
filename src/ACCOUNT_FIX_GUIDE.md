# ๐ง ุฏููู ุฅุตูุงุญ ูุดููุฉ "ุญุณุงุจู ุบูุฑ ููุชูู"

## ุงููุดููุฉ
ุจุนุฏ ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏุ ุนูุฏ ูุญุงููุฉ ุชุณุฌูู ุงูุฏุฎูู ุชุธูุฑ ุฑุณุงูุฉ: **"ุญุณุงุจู ุบูุฑ ููุชูู"**

## ุงูุณุจุจ
ูุงูุช ููุงู ูุดููุฉ ูู ููุฏ ุงูุฎุงุฏู (Backend) ุญูุซ ูุงู ูุชู ุงุณุชุฎุฏุงู ููู ุงูุชุฑุงุถูุฉ ุฎุงุทุฆุฉ ุนูุฏ ุฅูุดุงุก ุญุณุงุจ ุงูุทุงูุจ:
- ุฅุฐุง ูู ูุชู ุฅุฑุณุงู `level` ุฃู `major`ุ ูุงู ูุชู ุงุณุชุฎุฏุงู ููู ุงูุชุฑุงุถูุฉ (1 ู "Management Information Systems")
- ูุฐุง ุชุณุจุจ ูู ุญูุธ ุจูุงูุงุช ุบูุฑ ุตุญูุญุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ุงูุญู ุงููุทุจู โ

### 1. ุชุญุฏูุซ ููุฏ ุงูุฎุงุฏู
ุชู ุฅุตูุงุญ `/supabase/functions/server/index.tsx` ู `/supabase/functions/server/index-sql.tsx`:

**ูุจู ุงูุฅุตูุงุญ:**
```typescript
level: level || 1,  // โ ูููุฉ ุงูุชุฑุงุถูุฉ ุฎุงุทุฆุฉ
major: major || 'Management Information Systems',  // โ ูููุฉ ุงูุชุฑุงุถูุฉ ุฎุงุทุฆุฉ
```

**ุจุนุฏ ุงูุฅุตูุงุญ:**
```typescript
// โ ุงูุชุญูู ูู ูุฌูุฏ ุงูุจูุงูุงุช ุฃููุงู
if (!level || !major) {
  return c.json({ 
    error: 'ุจูุงูุงุช ุงูุทุงูุจ ุบูุฑ ููุชููุฉ',
    code: 'MISSING_STUDENT_DATA'
  }, 400);
}

level: parseInt(level),  // โ ุงุณุชุฎุฏุงู ุงููููุฉ ุงูุญููููุฉ
major: major,  // โ ุงุณุชุฎุฏุงู ุงููููุฉ ุงูุญููููุฉ
```

### 2. ุชุญุฏูุซ ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
ุชู ุฅุถุงูุฉ ูุญุต ุฅุถุงูู ูู `/components/pages/LoginPage.tsx`:
- ุงูุชุญูู ูู ูุฌูุฏ ุจูุงูุงุช ุงูุทุงูุจ
- ุงูุชุญูู ูู ุตุญุฉ ุงูุชุฎุตุต ูุงููุณุชูู
- ุนุฑุถ ุฑุณุงูุฉ ูุงุถุญุฉ ูุน ุฎูุงุฑ ุงูุฐูุงุจ ูุฃุฏุงุฉ ุงูุชูุธูู

### 3. ุชุญุณูู ุตูุญุฉ ุงูุชุณุฌูู
ุชู ุชุญุณูู `/components/pages/SignUpPage.tsx`:
- ูุนุงูุฌุฉ ุฎุทุฃ `MISSING_STUDENT_DATA` ุจุดูู ุฎุงุต
- ุฑุณุงุฆู ุฃูุถุญ ุนูุฏ ูุดู ุงูุชุณุฌูู

---

## ๐ ููู ุชุตูุญ ุญุณุงุจู ุงููุฏููุ

### ุงูุฎูุงุฑ 1: ุงุณุชุฎุฏุงู ุฃุฏุงุฉ ุงูุชูุธูู ๐งน
1. ุงุฐูุจ ุฅูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
2. ุงููุฑ ุนูู ุฑุงุจุท **"ุฌุฑุจ ุฃุฏุงุฉ ุงูุชูุธูู"** (ุงูููุฌูุฏ ูู ุฑุณุงูุฉ ุจุฑุชูุงููุฉ ุฃุณูู ุงูุตูุญุฉ)
3. ุฃุฏุฎู ุจุฑูุฏู ุงูุฅููุชุฑููู ุงูุฌุงูุนู
4. ุงููุฑ ุนูู "ุชูุธูู ุงูุญุณุงุจ"
5. ุจุนุฏ ูุฌุงุญ ุงูุชูุธููุ ุณุฌู ูู ุฌุฏูุฏ ุจููุณ ุงูุจุฑูุฏ

### ุงูุฎูุงุฑ 2: ุงุณุชุฎุฏุงู ุจุฑูุฏ ุฅููุชุฑููู ุฌุฏูุฏ ๐ง
ุจุจุณุงุทุฉ ุณุฌู ุญุณุงุจ ุฌุฏูุฏ ุจุงุณุชุฎุฏุงู ุจุฑูุฏ ุฌุงูุนู ูุฎุชูู

---

## ๐ ููู ุชุชุฃูุฏ ูู ุฃู ุงูุชุณุฌูู ุตุญูุญุ

ุนูุฏ ุฅูุดุงุก ุญุณุงุจ ุทุงูุจ ุฌุฏูุฏุ ุชุฃูุฏ ูู:
- โ ุฅุฏุฎุงู **ุงูุฑูู ุงูุฌุงูุนู** (9 ุฃุฑูุงู)
- โ ุงุฎุชูุงุฑ **ุงูุชุฎุตุต** ูู ุงููุงุฆูุฉ
- โ ุงุฎุชูุงุฑ **ุงููุณุชูู ุงูุฏุฑุงุณู** ูู ุงููุงุฆูุฉ
- โ ุงุณุชุฎุฏุงู **ุจุฑูุฏ ุฌุงูุนู** ููุชูู ุจู `@kku.edu.sa`
- โ ูููุฉ ูุฑูุฑ ูููุฉ (8+ ุฃุญุฑูุ ุญุฑู ูุจูุฑุ ุฑููุ ุฑูุฒ)

---

## ๐ก๏ธ ุงูุญูุงูุฉ ูู ุงููุดููุฉ ูู ุงููุณุชูุจู

ุงูุขู ุงููุธุงู ูุชุญูู ูู:
1. โ ูุฌูุฏ ุงูุชุฎุตุต ูุงููุณุชูู **ูุจู** ุญูุธ ุงูุจูุงูุงุช
2. โ ุฑูุถ ุงูุทูุจ ุฅุฐุง ูุงูุช ุงูุจูุงูุงุช ูุงูุตุฉ
3. โ ุนุฏู ุงุณุชุฎุฏุงู ููู ุงูุชุฑุงุถูุฉ ุฎุงุทุฆุฉ
4. โ ุชุญููู ุงูุจูุงูุงุช ุฅูู ุงูุฃููุงุน ุงูุตุญูุญุฉ (parseInt, parseFloat)

---

## ๐ ูู ูุง ุฒูุช ุชูุงุฌู ูุดุงููุ

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:
1. ุงูุชุญ Console ูู ุงููุชุตูุญ (F12)
2. ุงูุณุฎ ุฃู ุฑุณุงุฆู ุฎุทุฃ ุชุธูุฑ ุจุงูููู ุงูุฃุญูุฑ
3. ุชูุงุตู ูุน ุงูุฏุนู ุงูููู
4. ุฃู ุงุณุชุฎุฏู ุตูุญุฉ "ุฃุฏูุงุช ุงููุธุงู" ูุชูุธูู ุฌููุน ุงูุญุณุงุจุงุช ุงููุชุงูู

---

## ๐ ูููุทูุฑูู: ููู ุชูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุชุ

ุงูุชุญ Supabase Dashboard ูุดุบูู ูุฐุง ุงูุงุณุชุนูุงู:

```sql
-- ุนุฑุถ ุฌููุน ุงููุณุชุฎุฏููู ูุน ุจูุงูุงุช ุงูุทูุงุจ
SELECT 
  u.id,
  u.student_id,
  u.email,
  u.name,
  u.role,
  s.major,
  s.level,
  s.gpa
FROM users u
LEFT JOIN students s ON u.id = s.user_id
WHERE u.role = 'student'
ORDER BY u.created_at DESC;

-- ุงูุจุญุซ ุนู ุทูุงุจ ุจุฏูู ุจูุงูุงุช ูุงููุฉ
SELECT 
  u.id,
  u.student_id,
  u.email,
  s.major,
  s.level
FROM users u
LEFT JOIN students s ON u.id = s.user_id
WHERE u.role = 'student' 
  AND (s.major IS NULL OR s.level IS NULL);
```

---

ุชู ุงูุฅุตูุงุญ ุจุชุงุฑูุฎ: **27 ููููุจุฑ 2024**
ุงูุฅุตุฏุงุฑ: **v2.0 - Complete Account Fix**
