# ๐ฏ ุงูุชุนูููุงุช ุงูููุงุฆูุฉ - ุงุจุฏุฃ ููุง!

## โ๏ธ ุญู ูุดููุฉ ุงูุฎุทุฃ ูู SQL

ูุงุฌูุช ุฎุทุฃ ูุฃู ุฌุฏูู `departments` ููุฌูุฏ ุจุงููุนู ุจูููู ูุฎุชูู. ูุฏูู ุฎูุงุฑุงู:

---

## ๐ด ุงูุฎูุงุฑ 1: ุงูุจุฏุก ูู ุงูุตูุฑ (ููุตู ุจู ุฅุฐุง ูุงูุช ุจูุงูุงุชู ุชุฌุฑูุจูุฉ)

### โ๏ธ ุชุญุฐูุฑ: ุณูุญุฐู ุฌููุน ุงูุจูุงูุงุช!

**ุงูุฎุทูุงุช:**
1. ุงูุชุญ **Supabase Dashboard** โ **SQL Editor**
2. ุงูุชุญ ููู `database_clean_install.sql`
3. ุงูุณุฎ **ูู ุงููุญุชูู**
4. ุงูุตู ูู SQL Editor
5. ุงุถุบุท **Run** โถ๏ธ

**ุงููุชูุฌุฉ:**
- โ ุญุฐู ุฌููุน ุงูุฌุฏุงูู ุงููุฏููุฉ
- โ ุฅูุดุงุก ุฌุฏุงูู ุฌุฏูุฏุฉ ูุธููุฉ
- โ ุฅุฏุฎุงู ุจูุงูุงุช ุงูุฃูุณุงู
- โ๏ธ **ุณูุชู ุญุฐู ุฌููุน ุงูุญุณุงุจุงุช ุงููุณุฌูุฉ ุณุงุจูุงู**

---

## ๐ข ุงูุฎูุงุฑ 2: ุงูุฅุถุงูุฉ ุนูู ุงูููุฌูุฏ (ุฅุฐุง ูุงู ูุฏูู ุจูุงูุงุช ูููุฉ)

**ุงูุฎุทูุงุช:**
1. ุงูุชุญ **Supabase Dashboard** โ **SQL Editor**
2. ุงูุชุญ ููู `database_setup_fixed.sql`
3. ุงูุณุฎ **ูู ุงููุญุชูู**
4. ุงูุตู ูู SQL Editor
5. ุงุถุบุท **Run** โถ๏ธ

**ุงููุชูุฌุฉ:**
- โ ุฅูุดุงุก ุงูุฌุฏุงูู ุงููุงูุตุฉ ููุท
- โ ุงูุญูุงุธ ุนูู ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ
- โ ุฅุถุงูุฉ ุฃูุณุงู ุฌุฏูุฏุฉ (ุฅุฐุง ูู ุชูู ููุฌูุฏุฉ)

---

## โ ุงูุชุญูู ูู ุงููุฌุงุญ

ุจุนุฏ ุชูููุฐ ุฃู ูู ุงูุฎูุงุฑููุ ุดุบู ูุฐุง ุงูุงุณุชุนูุงู:

```sql
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema = 'public' 
  AND table_type = 'BASE TABLE'
ORDER BY table_name;
```

**ูุฌุจ ุฃู ุชุฑู 7 ุฌุฏุงูู ุนูู ุงูุฃูู:**
- โ admins
- โ course_offerings
- โ courses
- โ departments
- โ students
- โ supervisors
- โ users

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### 1. ุชุญูู ูู ุฌุฏูู ุงูุฃูุณุงู:
```sql
SELECT * FROM departments ORDER BY code;
```

**ูุฌุจ ุฃู ุชุฑู 5 ุฃูุณุงู:**
- MIS - ูุธู ุงููุนูููุงุช ุงูุฅุฏุงุฑูุฉ
- BA - ุฅุฏุงุฑุฉ ุงูุฃุนูุงู
- ACC - ุงููุญุงุณุจุฉ
- MKT - ุงูุชุณููู
- FIN - ุงูุชูููู

### 2. ุณุฌู ุญุณุงุจ ุทุงูุจ ุฌุฏูุฏ:
1. ุงุฐูุจ ุฅูู ุตูุญุฉ "ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ"
2. ุงููุฃ ุฌููุน ุงูุญููู:
   - ุงูุงุณู ุงููุงูู
   - ุงูุจุฑูุฏ @kku.edu.sa
   - ุงูุฑูู ุงูุฌุงูุนู (9 ุฃุฑูุงู)
   - **ุงูุชุฎุตุต** โ ุงุฎุชุฑ ูู ุงููุงุฆูุฉ
   - **ุงููุณุชูู** (1-8)
   - ุงููุนุฏู (ุงุฎุชูุงุฑู)
3. ุงุถุบุท "ุฅูุดุงุก ุญุณุงุจ"

### 3. ุณุฌู ุฏุฎูู:
1. ุงุณุชุฎุฏู ุงูุจุฑูุฏ ููููุฉ ุงููุฑูุฑ
2. ุณุชูููู ุชููุงุฆูุงู ูููุญุฉ ุงูุชุญูู

### 4. ุชุญูู ูู ุงูุจูุงูุงุช:
ูู ููุญุฉ ุงูุชุญููุ ูุฌุจ ุฃู ุชุฑู:
- โ ููุญุฉ ุฒุฑูุงุก ุจุนููุงู "ุงูุจูุงูุงุช ูุญููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช"
- โ ุงููุณุชูู ุงูุตุญูุญ
- โ ุงูุชุฎุตุต ุงููุงูู
- โ ุงููุนุฏู ุงูุตุญูุญ

---

## ๐ ุฅุฐุง ูู ุชุธูุฑ ุงูุจูุงูุงุช

ุดุบู ูุฐุง ููุชุญูู:

```sql
SELECT 
  u.name, 
  u.student_id,
  u.email,
  s.level, 
  s.major, 
  s.gpa
FROM users u
LEFT JOIN students s ON s.user_id = u.id
WHERE u.role = 'student'
ORDER BY u.created_at DESC
LIMIT 5;
```

**ุฅุฐุง ุฑุฃูุช ุงูุจูุงูุงุช ููุง ูููู ูุง ุชุธูุฑ ูู Dashboard:**
1. ุงูุชุญ Console ูู ุงููุชุตูุญ (F12)
2. ุงุจุญุซ ุนู ุฃุฎุทุงุก ุจุงูููู ุงูุฃุญูุฑ
3. ุชุญูู ูู ุฃู `access_token` ููุฌูุฏ ูู localStorage

---

## ๐ ููุฎุต ุงููููุงุช

| ุงูููู | ุงูุงุณุชุฎุฏุงู | ูุชู ุชุณุชุฎุฏููุ |
|------|----------|-------------|
| `database_clean_install.sql` | ุญุฐู ูู ุดูุก ูุงูุจุฏุก ูู ุฌุฏูุฏ | ุฅุฐุง ูุงูุช ุจูุงูุงุชู ุชุฌุฑูุจูุฉ |
| `database_setup_fixed.sql` | ุฅุถุงูุฉ ุนูู ุงูููุฌูุฏ | ุฅุฐุง ูุงู ูุฏูู ุจูุงูุงุช ูููุฉ |
| `verify_database.sql` | ุงูุชุญูู ูู ุงููุฌุงุญ | ุจุนุฏ ุชูููุฐ ุฃู ููู |

---

## ๐ฏ ูุงุฐุง ุชู ุฅุตูุงุญูุ

### โ 1. ูุดููุฉ SQL
- โ ุงูููู ุงููุฏูู: ูุญุชูู ุนูู ุฃุนูุฏุฉ `description_ar` ู `description_en`
- โ ุงูููู ุงูุฌุฏูุฏ: ุฅุฒุงูุฉ ูุฐู ุงูุฃุนูุฏุฉ
- โ ุงูุขู ุงูููุฏ ูุนูู ุจุฏูู ุฃุฎุทุงุก

### โ 2. ุฒุฑ ุงูุญุณุงุจ ุงูุชุฌุฑูุจู
- โ ุชู ุญุฐูู ููุงุฆูุงู ูู ุตูุญุฉ Login

### โ 3. ููุน ุงูุชุณุฌูู ุงููุชูุฑุฑ
- โ ุงููุณุชุฎุฏู ุงููุณุฌู ูุง ูุณุชุทูุน ุงููุตูู ูู /login ุฃู /signup

### โ 4. ุนุฑุถ ุจูุงูุงุช ุงูุทุงูุจ
- โ ุงูุจูุงูุงุช ุชูุญูุธ ูู ุฌุฏูู `students`
- โ ุชุธูุฑ ูู Dashboard ุจุดูู ุตุญูุญ

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ ุจุนุฏ ุงูุฅุนุฏุงุฏ

1. โ ุชุฃูุฏ ูู ุธููุฑ 7 ุฌุฏุงูู
2. โ ุณุฌู ุญุณุงุจ ุทุงูุจ ููุงุฎุชุจุงุฑ
3. โ ุชุญูู ูู ุธููุฑ ุงูุจูุงูุงุช ูู Dashboard
4. โ ุญุงูู ุชุณุฌูู ุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู (ุณูุชู ุชูุฌููู ููู Dashboard ูุจุงุดุฑุฉ)
5. โ ุญุงูู ุงูุฐูุงุจ ูู /login ูุฃูุช ูุณุฌู (ุณูุชู ููุนู)

---

## ๐ก ูุตุงุฆุญ

### ูุญุฐู ุญุณุงุจ ูุนูู:
```sql
-- ุงุญุฐู ูู Auth ุฃููุงู
DELETE FROM auth.users WHERE email = 'test@kku.edu.sa';
-- ุงูุจูุงูุงุช ูู users ู students ุณุชูุญุฐู ุชููุงุฆูุงู ุจุณุจุจ CASCADE
```

### ูุชุนุฏูู ุจูุงูุงุช ุทุงูุจ:
```sql
UPDATE students 
SET level = 4, major = 'Accounting', gpa = 4.5
WHERE user_id = (SELECT id FROM users WHERE email = 'student@kku.edu.sa');
```

### ูุฅุถุงูุฉ ูุณู ุฌุฏูุฏ:
```sql
INSERT INTO departments (code, name_ar, name_en) 
VALUES ('HR', 'ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ', 'Human Resources');
```

---

## โ ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ

**ุณ: ูู ุณุฃููุฏ ุจูุงูุงุชูุ**
- ุฅุฐุง ุงุณุชุฎุฏูุช `database_clean_install.sql` โ **ูุนู**
- ุฅุฐุง ุงุณุชุฎุฏูุช `database_setup_fixed.sql` โ **ูุง**

**ุณ: ููู ุฃุนุฑู ุฃู ููู ุฃุณุชุฎุฏูุ**
- ูุฏูู ุจูุงูุงุช ูููุฉ โ ุงุณุชุฎุฏู `database_setup_fixed.sql`
- ุชุฑูุฏ ุงูุจุฏุก ูู ุงูุตูุฑ โ ุงุณุชุฎุฏู `database_clean_install.sql`

**ุณ: ูุงุฐุง ูู ุธูุฑ ุฎุทุฃ ุขุฎุฑุ**
- ุงูุณุฎ ุฑุณุงูุฉ ุงูุฎุทุฃ ุงููุงููุฉ
- ุงุจุญุซ ุนู ุงุณู ุงูุฌุฏูู ุฃู ุงูุนููุฏ ูู ุงูุฑุณุงูุฉ
- ุชูุงุตู ูุนู ูุฃุนุทูู ุงูุฎุทุฃ ุงููุงูู

---

## โ Checklist ุงูููุงุฆู

- [ ] ุงุฎุชุฑุช ุฃุญุฏ ุงูุฎูุงุฑูู (clean install ุฃู fixed setup)
- [ ] ุดุบูุช ุงูููุฏ ูู SQL Editor
- [ ] ุฑุฃูุช ุฑุณุงูุฉ "Success" ุฃู "Rows affected"
- [ ] ุชุญููุช ูู ูุฌูุฏ 7 ุฌุฏุงูู
- [ ] ุฑุฃูุช 5 ุฃูุณุงู ูู departments
- [ ] ุณุฌูุช ุญุณุงุจ ุทุงูุจ ุฌุฏูุฏ
- [ ] ุณุฌูุช ุฏุฎูู ูุฑุฃูุช ุงูุจูุงูุงุช ูู Dashboard
- [ ] ุญุงููุช ุงููุตูู ูู /login ูุชู ุชูุฌููู ููู Dashboard

---

**๐ ุฅุฐุง ุฃูููุช ุฌููุน ุงูุฎุทูุงุชุ ุงููุธุงู ุฌุงูุฒ 100%!**
