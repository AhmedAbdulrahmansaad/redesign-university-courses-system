# ๐งช ุงุฎุชุจุงุฑุงุช ุฌุงูุฒุฉ ูููุณุฎ ุงููุจุงุดุฑ

ุงูุณุฎ ูุฐู ุงูุฃููุงุฏ ูุงูุตููุง ูู Console (F12) ูุงุฎุชุจุงุฑ ุงููุธุงู

---

## ุงุฎุชุจุงุฑ 1๏ธโฃ: Health Check

```javascript
fetch('https://kcbxyonombsqamwsmmqz.supabase.co/functions/v1/make-server-1573e40a/health')
  .then(r => r.json())
  .then(data => {
    console.log('๐ฅ Health Check:', data);
    if (data.status === 'ok') {
      console.log('โ ุงููุธุงู ูุนูู!');
      console.log('Environment Variables:', data.env);
    } else {
      console.log('โ ููุฌุฏ ูุดููุฉ');
    }
  })
  .catch(err => {
    console.error('โ ุฎุทุฃ ูู ุงูุงุชุตุงู:', err);
    console.log('ุชุฃูุฏ ูู ุฃู Edge Function ููุดูุฑ');
  });
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
๐ฅ Health Check: {
  status: "ok",
  message: "KKU Course Registration System - Connected to PostgreSQL",
  timestamp: "2024-11-30T...",
  env: { hasUrl: true, hasKey: true }
}
โ ุงููุธุงู ูุนูู!
Environment Variables: { hasUrl: true, hasKey: true }
```

---

## ุงุฎุชุจุงุฑ 2๏ธโฃ: ุฌูุจ ุฌููุน ุงูููุฑุฑุงุช

```javascript
fetch('https://kcbxyonombsqamwsmmqz.supabase.co/functions/v1/make-server-1573e40a/courses')
  .then(r => r.json())
  .then(data => {
    console.log('๐ ุนุฏุฏ ุงูููุฑุฑุงุช:', data.count);
    
    if (data.count === 0) {
      console.log('โ๏ธ ุฌุฏูู courses ูุงุฑุบ!');
      console.log('ุงูุญู: ููุฐ SQL ูู ููู: ๐ฅ-INSERT-ALL-DATA.sql');
    } else if (data.count === 49) {
      console.log('โ ููุชุงุฒ! ุฌููุน ุงูููุฑุฑุงุช ููุฌูุฏุฉ');
      console.log('ุฃูู 5 ููุฑุฑุงุช:');
      data.courses.slice(0, 5).forEach(c => {
        console.log(`  - ${c.code}: ${c.name_ar} (${c.credits} ุณุงุนุงุช)`);
      });
    } else {
      console.log(`โ๏ธ ุนุฏุฏ ุงูููุฑุฑุงุช ุบูุฑ ุตุญูุญ (${data.count} ุจุฏูุงู ูู 49)`);
    }
  })
  .catch(err => console.error('โ ุฎุทุฃ:', err));
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
๐ ุนุฏุฏ ุงูููุฑุฑุงุช: 49
โ ููุชุงุฒ! ุฌููุน ุงูููุฑุฑุงุช ููุฌูุฏุฉ
ุฃูู 5 ููุฑุฑุงุช:
  - ARAB 101: ุงูููุงุฑุงุช ุงููุบููุฉ (3 ุณุงุนุงุช)
  - ENGL 101: ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ 1 (3 ุณุงุนุงุช)
  - MATH 101: ุงูุฑูุงุถูุงุช ุงูุนุงูุฉ (3 ุณุงุนุงุช)
  -ISLM 101: ุงูุซูุงูุฉ ุงูุฅุณูุงููุฉ 1 (2 ุณุงุนุงุช)
  - CS 101: ููุฏูุฉ ูู ุงูุญุงุณุจ ุงูุขูู (3 ุณุงุนุงุช)
```

---

## ุงุฎุชุจุงุฑ 3๏ธโฃ: ุฅูุดุงุก ุญุณุงุจ ุงุฎุชุจุงุฑ

```javascript
// โ๏ธ ูุฐุง ุณููุดุฆ ุญุณุงุจ ุญูููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
fetch('https://kcbxyonombsqamwsmmqz.supabase.co/functions/v1/make-server-1573e40a/auth/signup', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtjYnh5b25vbWJzcWFtd3NtbXF6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQzNzA3OTMsImV4cCI6MjA3OTk0Njc5M30.IR1b_sKmNZnPHSx_EBTI0G5ouARblxMepr24nOxq8iM'
  },
  body: JSON.stringify({
    studentId: '442200001',
    email: 'test@kku.edu.sa',
    password: 'Test123!',
    name: 'ุทุงูุจ ุงุฎุชุจุงุฑ',
    phone: '0501234567',
    role: 'student',
    level: '1',
    major: 'MIS',
    gpa: '0.0'
  })
})
  .then(r => r.json())
  .then(data => {
    if (data.success) {
      console.log('โ ุชู ุฅูุดุงุก ุงูุญุณุงุจ ุจูุฌุงุญ!');
      console.log('ุงููุณุชุฎุฏู:', data.user);
      console.log('ุงูุฑุณุงูุฉ:', data.message);
      console.log('');
      console.log('ุงูุขู ุงุฐูุจ ูู Supabase โ Table Editor โ users');
      console.log('ูุฌุจ ุฃู ุชุฑู ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ!');
    } else {
      console.log('โ ุฎุทุฃ:', data.error);
      if (data.error.includes('ูุณุฌู ูุณุจูุงู')) {
        console.log('ุงูุญุณุงุจ ููุฌูุฏ ุจุงููุนู - ุฌุฑุจ ุฑูู ุฌุงูุนู ุขุฎุฑ');
      }
    }
  })
  .catch(err => console.error('โ ุฎุทุฃ ูู ุงูุงุชุตุงู:', err));
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
โ ุชู ุฅูุดุงุก ุงูุญุณุงุจ ุจูุฌุงุญ!
ุงููุณุชุฎุฏู: {
  id: 1,
  student_id: "442200001",
  email: "test@kku.edu.sa",
  name: "ุทุงูุจ ุงุฎุชุจุงุฑ",
  role: "student",
  ...
}
ุงูุฑุณุงูุฉ: ุชู ุฅูุดุงุก ุงูุญุณุงุจ ุจูุฌุงุญ

ุงูุขู ุงุฐูุจ ูู Supabase โ Table Editor โ users
ูุฌุจ ุฃู ุชุฑู ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ!
```

---

## ุงุฎุชุจุงุฑ 4๏ธโฃ: ุชุณุฌูู ุฏุฎูู

```javascript
// ุชุณุฌูู ุฏุฎูู ุจุงูุญุณุงุจ ุงูุฐู ุฃูุดุฃูุงู
fetch('https://kcbxyonombsqamwsmmqz.supabase.co/functions/v1/make-server-1573e40a/auth/login', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    identifier: '442200001',  // ุฃู test@kku.edu.sa
    password: 'Test123!'
  })
})
  .then(r => r.json())
  .then(data => {
    if (data.success) {
      console.log('โ ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ!');
      console.log('ุงููุณุชุฎุฏู:', data.user);
      console.log('Access Token:', data.access_token);
      console.log('');
      console.log('ุงุญูุธ ูุฐุง Token ูุงุฎุชุจุงุฑุงุช ุฃุฎุฑู:');
      window.TEST_TOKEN = data.access_token;
      console.log('ุชู ุญูุธู ูู: window.TEST_TOKEN');
    } else {
      console.log('โ ุฎุทุฃ:', data.error);
    }
  })
  .catch(err => console.error('โ ุฎุทุฃ:', err));
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
โ ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ!
ุงููุณุชุฎุฏู: {
  id: 1,
  student_id: "442200001",
  email: "test@kku.edu.sa",
  name: "ุทุงูุจ ุงุฎุชุจุงุฑ",
  students: [{level: 1, major: "MIS", gpa: 0}]
}
Access Token: eyJh...
ุงุญูุธ ูุฐุง Token ูุงุฎุชุจุงุฑุงุช ุฃุฎุฑู:
ุชู ุญูุธู ูู: window.TEST_TOKEN
```

---

## ุงุฎุชุจุงุฑ 5๏ธโฃ: ุงูุชุณุฌูู ูู ููุฑุฑ

```javascript
// ูุฌุจ ุชุณุฌูู ุฏุฎูู ุฃููุงู (ุงุฎุชุจุงุฑ 4)
if (!window.TEST_TOKEN) {
  console.log('โ ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู ุฃููุงู (ููุฐ ุงุฎุชุจุงุฑ 4)');
} else {
  fetch('https://kcbxyonombsqamwsmmqz.supabase.co/functions/v1/make-server-1573e40a/register-course', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${window.TEST_TOKEN}`
    },
    body: JSON.stringify({
      courseId: 1,  // ARAB 101
      semester: 'Fall 2024',
      year: 2024
    })
  })
    .then(r => r.json())
    .then(data => {
      if (data.success) {
        console.log('โ ุชู ุงูุชุณุฌูู ุจูุฌุงุญ!');
        console.log('ุงูุฑุณุงูุฉ:', data.message);
        console.log('ุงูุชุณุฌูู:', data.enrollment);
        console.log('');
        console.log('ุงูุขู ุงุฐูุจ ูู Supabase โ Table Editor โ enrollments');
        console.log('ูุฌุจ ุฃู ุชุฑู ุงูุชุณุฌูู ุงูุฌุฏูุฏ!');
      } else {
        console.log('โ ุฎุทุฃ:', data.error);
      }
    })
    .catch(err => console.error('โ ุฎุทุฃ:', err));
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
โ ุชู ุงูุชุณุฌูู ุจูุฌุงุญ!
ุงูุฑุณุงูุฉ: ุชู ุงูุชุณุฌูู ุจูุฌุงุญ. ูู ุงูุชุธุงุฑ ููุงููุฉ ุงููุดุฑู
ุงูุชุณุฌูู: {
  id: 1,
  user_id: 1,
  course_id: 1,
  semester: "Fall 2024",
  status: "pending",
  ...
}

ุงูุขู ุงุฐูุจ ูู Supabase โ Table Editor โ enrollments
ูุฌุจ ุฃู ุชุฑู ุงูุชุณุฌูู ุงูุฌุฏูุฏ!
```

---

## ๐ฏ ุงุฎุชุจุงุฑ ุดุงูู (ูู ุดูุก)

```javascript
console.log('๐งช ุจุฏุก ุงูุงุฎุชุจุงุฑ ุงูุดุงูู...\n');

// 1. Health Check
fetch('https://kcbxyonombsqamwsmmqz.supabase.co/functions/v1/make-server-1573e40a/health')
  .then(r => r.json())
  .then(data => {
    console.log('1๏ธโฃ Health Check:', data.status === 'ok' ? 'โ' : 'โ');
    
    // 2. Courses
    return fetch('https://kcbxyonombsqamwsmmqz.supabase.co/functions/v1/make-server-1573e40a/courses');
  })
  .then(r => r.json())
  .then(data => {
    console.log(`2๏ธโฃ ุงูููุฑุฑุงุช: ${data.count === 49 ? 'โ' : 'โ'} (${data.count}/49)`);
    console.log('\nโจ ุงูุฎูุงุตุฉ:');
    console.log('- Edge Function: โ ููุดูุฑ ููุนูู');
    console.log('- ูุงุนุฏุฉ ุงูุจูุงูุงุช: โ ูุชุตูุฉ');
    console.log('- ุงูููุฑุฑุงุช: โ ููุฌูุฏุฉ');
    console.log('\n๐ ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู!');
    console.log('ุงูุขู ุฌุฑุจ ุฅูุดุงุก ุญุณุงุจ ูู ุงููุธุงู (ูุงุฌูุฉ ุงููุณุชุฎุฏู)');
  })
  .catch(err => {
    console.error('โ ูุดู ุงูุงุฎุชุจุงุฑ:', err);
    console.log('\n๐ ุชุญูู ูู:');
    console.log('1. Edge Function ููุดูุฑ ูู Supabase');
    console.log('2. Environment Variables ูุถุงูุฉ');
    console.log('3. ุงุณู Function ูู: server');
  });
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
๐งช ุจุฏุก ุงูุงุฎุชุจุงุฑ ุงูุดุงูู...

1๏ธโฃ Health Check: โ
2๏ธโฃ ุงูููุฑุฑุงุช: โ (49/49)

โจ ุงูุฎูุงุตุฉ:
- Edge Function: โ ููุดูุฑ ููุนูู
- ูุงุนุฏุฉ ุงูุจูุงูุงุช: โ ูุชุตูุฉ
- ุงูููุฑุฑุงุช: โ ููุฌูุฏุฉ

๐ ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู!
ุงูุขู ุฌุฑุจ ุฅูุดุงุก ุญุณุงุจ ูู ุงููุธุงู (ูุงุฌูุฉ ุงููุณุชุฎุฏู)
```

---

## ๐ ุงูุชุญูู ูู Supabase

ุจุนุฏ ุชูููุฐ ุงูุงุฎุชุจุงุฑุงุชุ ุชุญูู ูู Supabase:

### Table Editor โ users
```
ูุฌุจ ุฃู ุชุฑู:
| id | student_id | email          | name        |
|----|------------|----------------|-------------|
| 1  | 442200001  | test@kku.edu.sa| ุทุงูุจ ุงุฎุชุจุงุฑ |
```

### Table Editor โ students
```
| id | user_id | level | major | gpa  |
|----|---------|-------|-------|------|
| 1  | 1       | 1     | MIS   | 0.00 |
```

### Table Editor โ courses
```
ูุฌุจ ุฃู ูููู ุนุฏุฏ ุงูุตููู: 49
```

### Table Editor โ enrollments
```
| id | user_id | course_id | status  | semester  |
|----|---------|-----------|---------|-----------|
| 1  | 1       | 1         | pending | Fall 2024 |
```

---

## ๐ฏ ููุฎุต ุณุฑูุน

```
โ ุฅุฐุง ูุฌุญุช ูู ุงูุงุฎุชุจุงุฑุงุช:
   ุงููุธุงู ูุชุตู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ!

โ ุฅุฐุง ูุดู ุฃู ุงุฎุชุจุงุฑ:
   ุฑุงุฌุน ููู: ๐ฑ-ุฎุทูุงุช-ุงููุดุฑ-ุงูุชูุตูููุฉ.md
```

---

**ุงุญูุธ ูุฐุง ุงูููู ููุงุฎุชุจุงุฑุงุช ุงููุณุชูุจููุฉ!** ๐งช
